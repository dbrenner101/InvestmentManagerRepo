<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <entry key="transactionsByAccountIdAndInvestmentId">
        <![CDATA[
            SELECT t.*, i.*, a.*
            FROM transactions t, investments i, accounts a
            WHERE 
            	t.account_id = ? 
            	AND a.account_id = t.account_id
            	AND t.investment_id = i.investment_id 
            	AND t.investment_id = ?;
        ]]>
    </entry>
    <entry key="transactionsBuyHoldingId">
        <![CDATA[
            SELECT t.*, i.*, a.*
            FROM transactions t, investments i, accounts a
            WHERE 
            	t.holding_id = ? 
            	AND t.transaction_type = 'Buy'
            	AND a.account_id = t.account_id
            	AND t.investment_id = i.investment_id;
        ]]>
    </entry>
    <entry key="transactionByTransactionId">
        <![CDATA[
            SELECT t.*, i.*, a.*
            FROM transactions t, investments i, accounts a 
            WHERE transaction_id = ? and t.investment_id = i.investment_id and a.account_id = t.account_id;
        ]]>
    </entry>
    <entry key="transactionsByAccountIdOrderedByTransactionDateDesc">
        <![CDATA[
            SELECT t.*, i.*, a.*
            FROM transactions t, investments i, accounts a
            WHERE 
            	t.account_id = ? 
            	AND t.investment_id = i.investment_id
            	AND a.account_id = t.account_id
            ORDER BY t.transaction_date DESC;
        ]]>
    </entry>
    <entry key="transactionsByAccountIdOrderedByInvestmentSymbol">
        <![CDATA[
            SELECT t.*, i.*
			FROM transactions t
			JOIN investments i on i.investment_id = t.investment_id
			ORDER BY i.symbol;
        ]]>
    </entry>
    <entry key="transactionsByAccountIdAndHoldingId">
        <![CDATA[
            SELECT t.*
			FROM transactions t
			WHERE account_id = ? and holding_id = ?;
        ]]>
    </entry>
    <entry key="transactionForAccountsWithCash">
        <![CDATA[
            SELECT t.*, i.*, a.*
			FROM transactions t, investments i, accounts a
			WHERE 
				t.transaction_type in ('Cash', 'Dividend') 
			    AND i.investment_id = t.investment_id
			    AND a.account_id = t.account_id
			    AND t.account_id = ?;
        ]]>
    </entry>
    <entry key="totalDividendsForInvestments">
        <![CDATA[
            SELECT investment_id, SUM(trade_price * trade_quantity) as dividend
            FROM transactions 
            WHERE transaction_type='Dividend' and investment_id = ?1 
            GROUP BY investment_id;
        ]]>
    </entry>
    <entry key="totalDividendsByInvestment">
        <![CDATA[
            SELECT investment_id, SUM(trade_price * trade_quantity) as dividend 
            FROM transactions 
            WHERE transaction_type='Dividend'
            GROUP BY investment_id;
        ]]>
    </entry>
    <entry key="transactionsInsert">
        <![CDATA[
            INSERT INTO transactions(
            	trade_price, trade_quantity, transaction_date, transaction_type, account_id, investment_id, holding_id, cash_transaction_id)
            VALUES (?, ?, ?, ?, ?, ?, ?, ?);
        ]]>
    </entry>
    <entry key="transactionsUpdate">
        <![CDATA[
            UPDATE transactions
            SET
            	trade_price = ?,
            	trade_quantity = ?,
            	transaction_date = ?,
            	transaction_type = ?,
            	account_id =?,
            	investment_id = ?,
            	holding_id = ?,
            	cash_transaction_id = ?
            WHERE transaction_id = ?;

        ]]>
    </entry>
    <entry key="transactionsDelete">
        <![CDATA[
            DELETE FROM transactions
            WHERE transaction_id = ?;

        ]]>
    </entry>
</properties>